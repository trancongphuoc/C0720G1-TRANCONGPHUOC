<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 1</title>
</head>
<body>
<script>
    //MẢNG
    let listCustomer = [];
    let listEmployee = [];



    //REGET
    let regEmail = /^(\w[.]?){3,}@[a-zA-Z]{3,5}\.[a-zA-Z]{2,3}$/;
    let regCmnd = /^\d{8}$/;
    let regPhoneNumber = /^\d{10}$/;
    let regNumber = /^\d*$/;
    let regBirthday = /^((0[1-9])|([1-2][0-9])|(3[0-1]))\/(([0][1-9])|1[0-2])\/(19[0-9]{2}|20[0-1][0-9]|2020)$/;



    // LỚP KHÁCH HÀNG
    class Customer {
        constructor(fullName, cmnd, birthday, email, address, customer, sale, soLuongDiKem, rentDays, service, room) {
            this.fullName = fullName;
            this.cmnd = cmnd;
            this.birthday = birthday;
            this.email = email;
            this.address = address;
            this.customer = customer;
            this.sale = sale;
            this.soLuongDiKem = soLuongDiKem;
            this.rentDays = rentDays;
            this.service = service;
            this.room = room;
        }

        getFullName() {
            return this.fullName;
        }

        setFullName(fullName) {
            this.fullName = fullName;
        }

        getCmnd() {
            return this.cmnd;
        }

        setCmnd(cmnd) {
            this.cmnd = cmnd;
        }

        getBirthday() {
            return this.birthday;
        }

        setBirthday(birthday) {
            this.birthday = birthday;
        }

        getEmail() {
            return this.email;
        }

        setEmail(email) {
            this.email = email;
        }

        getAddress() {
            return this.address;
        }

        setAddress(address) {
            this.address = address;
        }

        getCustomer() {
            return this.customer;
        }

        setCustomer(customer) {
            this.customer = customer;
        }

        getSale() {
            return this.sale;
        }

        setSale(sale) {
            this.sale = sale;
        }

        getSoLuongDiKem() {
            return this.soLuongDiKem;
        }

        setSoLuongDiKem(soLuongDiKem) {
            this.soLuongDiKem = soLuongDiKem;
        }

        getRentDays() {
            return this.rentDays;
        }

        setRentDays(rentDays) {
            this.rentDays = rentDays;
        }

        getService() {
            return this.service;
        }

        setService(service) {
            this.service = service;
        }

        getRoom() {
            return this.room;
        }

        setRoom(room) {
            this.room = room;
        }

        bill() {
            if (this.service === "Villa")
                return 500 * this.rentDays * (1 - this.sale / 100);
            else if (this.service === "House")
                return 300 * this.rentDays * (1 - this.sale / 100);
            else if (this.service === "Room")
                return 100 * this.rentDays * (1 - this.sale / 100);
        }
    }



    // THÊM KHÁCH HÀNG
    function addNewCustomer() {

        let fullName = prompt("Họ và tên:");
        let cmnd = prompt("Số CMND(xxxxxxxx):");
        while (true) {
            if (!regCmnd.test(cmnd)) {
                cmnd = prompt("Số CMND:");
            } else {
                break;
            }
        }
        let birthDay = prompt("Ngày tháng năm sinh(dd/mm/yy):");
        while (true) {
            if (!regBirthday.test(birthDay)) {
                birthDay = prompt("Ngày tháng năm sinh:");
            } else {
                break;
            }
        }
        let email = prompt("Email:");
        while (true) {
            if (!regEmail.test(email)) {
                email = prompt("Email:");
            } else {
                break;
            }
        }
        let address = prompt("Địa chỉ:");
        let cusTomer = prompt("Diamond, Platinum, Gold, Sliver, Member:");
        let sale = parseInt(prompt("Giảm giá:"));
        while (true) {
            if (!regNumber.test(sale)) {
                sale = prompt("Giảm giá:");
            } else {
                break;
            }
        }
        let soLuongdikem = parseInt(prompt("Số lượng đi kèm:"));
        while (true) {
            if (!regNumber.test(soLuongdikem)) {
                soLuongdikem = prompt("Số lượng đi kèm:");
            } else {
                break;
            }
        }
        let rentDays = parseInt(prompt("Số ngày thuê:"));
        while (true) {
            if (!regNumber.test(rentDays)) {
                rentDays = prompt("Số ngày thuê:");
            } else {
                break;
            }
        }
        let service = prompt("Loại dịch vụ (Villa: 500$/ 1 ngày, House: 300$/ 1 ngày, Room: 100$/ 1 ngày)");
        let room = prompt("Loại phòng thuê (Vip, Business, Normal)");

        let newCustomer = new Customer(fullName, cmnd, birthDay, email, address, cusTomer, sale, soLuongdikem, rentDays, service, room);

        listCustomer.push(newCustomer);
        alert("Done");
        customer()
    }



    // HIỂN THỊ DANH SÁCH KHÁCH HÀNG
    function displayCustomer() {
        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ". Name: " + listCustomer[i].getFullName() + "\n";
        }
        let choose = parseInt(prompt(temp));
        if (choose >= 0 && choose < listCustomer.length) {
            alert("Họ và tên: " + listCustomer[choose].getFullName() + "\n"
                + "Số CMND: " + listCustomer[choose].getCmnd() + "\n"
                + "Ngày tháng năm sinh: " + listCustomer[choose].getBirthday() + "\n"
                + "Email: " + listCustomer[choose].getEmail() + "\n"
                + "Địa chỉ: " + listCustomer[choose].getAddress() + "\n"
                + "Customer: " + listCustomer[choose].getCustomer() + "\n"
                + "Giảm giá: " + listCustomer[choose].getSale() + "\n"
                + "Số lượng đi kèm: " + listCustomer[choose].getSoLuongDiKem() + "\n"
                + "Số ngày thuê: " + listCustomer[choose].getRentDays() + "\n"
                + "Loại dịch vụ: " + listCustomer[choose].getService() + "\n"
                + "Loại phong thuê: " + listCustomer[choose].getRoom() + "\n"
            );
        } else {
            alert("Cancle")
        }
        customer();
    }



    // CHỈNH SỬA THÔNG TIN KHÁCH HÀNG
    function editCustomer() {
        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ". Name: " + listCustomer[i].getFullName() + "\n";
        }
        temp += listCustomer.length + ". Quay lại";
        let chooseDisplay = parseInt(prompt(temp));
        if (chooseDisplay >= 0 && chooseDisplay < listCustomer.length) {
            let chooseEdit = parseInt(prompt("1. Họ và tên: " + listCustomer[chooseDisplay].getFullName() + "\n"
                + "2. Số CMND: " + listCustomer[chooseDisplay].getCmnd() + "\n"
                + "3. Ngày tháng năm sinh: " + listCustomer[chooseDisplay].getBirthday() + "\n"
                + "4. Email: " + listCustomer[chooseDisplay].getEmail() + "\n"
                + "5. Địa chỉ: " + listCustomer[chooseDisplay].getAddress() + "\n"
                + "6. Customer: " + listCustomer[chooseDisplay].getCustomer() + "\n"
                + "7. Giảm giá: " + listCustomer[chooseDisplay].getSale() + "%" + "\n"
                + "8. Số lượng đi kèm: " + listCustomer[chooseDisplay].getSoLuongDiKem() + "\n"
                + "9. Số ngày thuê: " + listCustomer[chooseDisplay].getRentDays() + "\n"
                + "10. Loại dịch vụ: " + listCustomer[chooseDisplay].getService() + "\n"
                + "11. Loại phong thuê: " + listCustomer[chooseDisplay].getRoom() + "\n"
                + "12. Quay lại."));

            switch (chooseEdit) {
                case 1:
                    listCustomer[chooseDisplay].setFullName(prompt("Họ và tên: "));
                    break;
                case 2:
                    listCustomer[chooseDisplay].setCmnd(prompt("Số CMND: "));
                    while (true) {
                        if (!regCmnd.test(listCustomer[chooseDisplay].getCmnd())) {
                            listCustomer[chooseDisplay].setCmnd(prompt("Số CMND: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 3:
                    listCustomer[chooseDisplay].setBirthday(prompt("Ngày tháng năm sinh: "));
                    while (true) {
                        if (!regBirthday.test(listCustomer[chooseDisplay].getBirthday())) {
                            listCustomer[chooseDisplay].setBirthday(prompt("Ngày tháng năm sinh: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 4:
                    listCustomer[chooseDisplay].setEmail(prompt("Email: "));
                    while (true) {
                        if (!regEmail.test(listCustomer[chooseDisplay].getEmail())) {
                            listCustomer[chooseDisplay].setEmail(prompt("Email: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 5:
                    listCustomer[chooseDisplay].setAddress(prompt("Địa chỉ: "));
                    break;
                case 6:
                    listCustomer[chooseDisplay].setCustomer(prompt("Customer: "));
                    break;
                case 7:
                    listCustomer[chooseDisplay].setSale(parseInt(prompt("Giảm giá: ")));
                    while (true) {
                        if (!regNumber.test(listCustomer[chooseDisplay].getSale())) {
                            listCustomer[chooseDisplay].setSale(prompt("Giảm giá: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 8:
                    listCustomer[chooseDisplay].setSoLuongDiKem(parseInt(prompt("Số lượng đi kèm: ")));
                    while (true) {
                        if (!regNumber.test(listCustomer[chooseDisplay].getSoLuongDiKem())) {
                            listCustomer[chooseDisplay].setSoLuongDiKem(prompt("Số lượng đi kèm: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 9:
                    listCustomer[chooseDisplay].setRentDays(parseInt(prompt("Số ngày thuê: ")));
                    while (true) {
                        if (!regNumber.test(listCustomer[chooseDisplay].getRentDays())) {
                            listCustomer[chooseDisplay].setRentDays(prompt("Số ngày thuê: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 10:
                    listCustomer[chooseDisplay].setService(prompt("Loại dịch vụ: "));
                    break;
                case 11:
                    listCustomer[chooseDisplay].setRoom(prompt("Loại phong thuê: "));
                    break;
                case 12:
                    editCustomer();
                    break;
                default:
                    alert("Failed")
            }
            editCustomer();
        } else if (chooseDisplay === listCustomer.length) {
            customer();
        } else {
            alert("Failed");
            customer();
        }

    }



    // XÓA KHÁCH HÀNG
    function deleteCustomer() {
        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ". Name: " + listCustomer[i].getFullName() + "\n";
        }
        let chooseDelete = parseInt(prompt(temp));
        let check = parseInt(prompt("Bạn có muốn xóa ? " + "\n1.Yes" + "\n2.No"));
        if (check === 1) {
            listCustomer.splice(chooseDelete, 1);
        } else {
            alert("Cancle")
        }
        customer();
    }



    // HIỂN THỊ HÓA ĐƠN KHÁCH HÀNG
    function displayTotalPayOfCustomer() {
        let temp = "";
        for (let i = 0; i < listCustomer.length; i++) {
            temp += i + ". Name: " + listCustomer[i].getFullName() + "\n";
        }
        let choosebill = parseInt(prompt(temp));
        alert(listCustomer[choosebill].bill());
        customer();
    }



    // LỚP NHÂN VIÊN
    class Employee {
        constructor(fullName, cmnd, birthday, email, address, position, phoneNumber) {
            this.fullName = fullName;
            this.cmnd = cmnd;
            this.birthday = birthday;
            this.email = email;
            this.address = address;
            this.position = position;
            this.phoneNumber = phoneNumber;
        }

        getFullNameEmployee() {
            return this.fullName;
        }

        setFullNameEmployee(fullName) {
            this.fullName = fullName;
        }

        getCmndEmployee() {
            return this.cmnd;
        }

        setCmndEmployee(cmnd) {
            this.cmnd = cmnd;
        }

        getBirthdayEmployee() {
            return this.birthday;
        }

        setBirthdayEmployee(birthday) {
            this.birthday = birthday;
        }

        getEmailEmployee() {
            return this.email;
        }

        setEmailEmployee(email) {
            this.email = email;
        }

        getAddressEmployee() {
            return this.address;
        }

        setAddressEmployee(address) {
            this.address = address;
        }

        getPositionEmployee() {
            return this.position;
        }

        setPositionEmployee(position) {
            this.position = position;
        }

        getPhoneNumberEmployee() {
            return this.phoneNumber;
        }

        setPhoneNumberEmployee(phoneNumber) {
            this.phoneNumber = phoneNumber;
        }

        showSalary() {
            if (this.position === "Manager") {
                return 500 + "$"
            } else if (this.position === "Sale") {
                return 300 + "$"
            } else if (this.position === "Marketing") {
                return 200 + "$"
            } else {
                return "Vui lòng nhập đúng chức vụ."
            }
        }

    }



    // THÊM NHÂN VIÊN
    function addNewEmployee() {
        let fullName = prompt("Họ và tên: ");
        let cmnd = prompt("Số CMND(xxxxxxxx): ");
        while (true) {
            if (!regCmnd.test(cmnd)) {
                cmnd = prompt("Số CMND:");
            } else {
                break;
            }
        }
        let birthDay = prompt("Ngày tháng năm sinh:");
        while (true) {
            if (!regBirthday.test(birthDay)) {
                birthDay = prompt("Ngày tháng năm sinh:");
            } else {
                break;
            }
        }
        let email = prompt("Email: ");
        while (true) {
            if (!regCmnd.test(cmnd)) {
                cmnd = prompt("Số CMND:");
            } else {
                break;
            }
        }
        let address = prompt("Địa chỉ: ");
        let position = prompt("Chức vụ: ");
        let phoneNumber = prompt("Số điện thoại(xxxxxxxxxx): ");
        while (true) {
            if (!regPhoneNumber.test(phoneNumber)) {
                phoneNumber = prompt("Số điện thoại: ");
            } else {
                break;
            }
        }
        let newEmploy = new Employee(fullName, cmnd, birthDay, email, address, position, phoneNumber);
        listEmployee.push(newEmploy);
        alert("Done.");
        employee();
    }



    // HIỂN THỊ DANH SÁCH NHÂN VIÊN
    function displayEmployee() {
        let temp = "";
        for (let i = 0; i < listEmployee.length; i++) {
            temp += i + ". Name: " + listEmployee[i].getFullNameEmployee() + "\n";
        }
        let input = parseInt(prompt(temp));
        if (input >= 0 && input < listEmployee.length) {
            alert("Họ và tên: " + listEmployee[input].getFullNameEmployee() + "\n"
                + "Số CMND: " + listEmployee[input].getCmndEmployee() + "\n"
                + "Ngày tháng năm sinh: " + listEmployee[input].getBirthdayEmployee() + "\n"
                + "Email: " + listEmployee[input].getEmailEmployee() + "\n"
                + "Địa chỉ: " + listEmployee[input].getAddressEmployee() + "\n"
                + "Chức vụ: " + listEmployee[input].getPositionEmployee() + "\n"
                + "Số điện thoại: " + listCustomer[input].getPhoneNumberEmployee())
        } else {
            alert("Failed")
        }
        employee();
    }



    // CHỈNH SỬA THÔNG TIN NHÂN VIÊN
    function editInformationEmployee() {
        let temp = "";
        for (let i = 0; i < listEmployee.length; i++) {
            temp += i + ". Name:  " + listEmployee[i].getFullNameEmployee() + "\n";
        }
        temp += listEmployee.length + ". Quay lại";
        let input = parseInt(prompt(temp));
        if (input >= 0 && input < listEmployee.length) {
            let choose = parseInt(prompt("1. Họ và tên: " + listEmployee[input].getFullNameEmployee() + "\n"
                + "2. Số CMND: " + listEmployee[input].getCmndEmployee() + "\n"
                + "3. Ngày tháng năm sinh: " + listEmployee[input].getBirthdayEmployee() + "\n"
                + "4. Email: " + listEmployee[input].getEmailEmployee() + "\n"
                + "5. Địa chỉ: " + listEmployee[input].getAddressEmployee() + "\n"
                + "6. Chức vụ: " + listEmployee[input].getPositionEmployee() + "\n"
                + "7. Số điện thoại: " + listEmployee[input].getPhoneNumberEmployee() + "\n"
                + "8. Quay Lại."));
            switch (choose) {
                case 1:
                    listEmployee[input].setFullNameEmployee(prompt("Họ và tên: "));
                    break;
                case 2:
                    listEmployee[input].setCmndEmployee(prompt("Số CMND: "));
                    while (true) {
                        if (!regCmnd.test(listEmployee[input].getCmndEmployee())) {
                            listEmployee[input].setCmndEmployee(prompt("Số CMND: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 3:
                    listEmployee[input].setBirthdayEmployee(prompt("Ngày tháng năm sinh: "));
                    while (true) {
                        if (!regBirthday.test(listEmployee[input].getBirthdayEmployee())) {
                            listEmployee[input].setBirthdayEmployee(prompt("Ngày tháng năm sinh: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 4:
                    listEmployee[input].setEmailEmployee(prompt("Email: "));
                    while (true) {
                        if (!regEmail.test(listEmployee[input].getEmailEmployee())) {
                            listEmployee[input].setEmailEmployee(prompt("Email: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 5:
                    listEmployee[input].setAddressEmployee(prompt("Địa chỉ: "));
                    break;
                case 6:
                    listEmployee[input].setPositionEmployee(prompt("Chức vụ: "));
                    break;
                case 7:
                    listCustomer[input].setPhoneNumberEmployee(prompt("Số điện thoại: "));
                    while (true) {
                        if (!regPhoneNumber.test(listEmployee[input].getPhoneNumberEmployee())) {
                            listEmployee[input].setPhoneNumberEmployee(prompt("Số điện thoại: "));
                        } else {
                            break;
                        }
                    }
                    break;
                case 8:
                    editInformationEmployee();
                    break;
                default:
                    alert("Failed!!!")
            }
            editInformationEmployee();
        } else if (input === listEmployee.length) {
            employee();
        } else {
            alert("Failed!!!");
            employee();
        }

    }



    // XÓA NHÂN VIÊN
    function deleteEmployee() {
        let temp = "";
        for (let i = 0; i < listEmployee.length; i++) {
            temp += i + ". Name: " + listEmployee[i].getFullNameEmployee() + "\n";
        }
        let input = parseInt(prompt(temp));
        if (input >= 0 && input < listEmployee.length) {
            let check = parseInt(prompt("Bạn có muốn xóa ?" + "\n1.Yes" + "\n2.No"));
            if (check === 1) {
                listEmployee.splice(input, 1)
            } else {
                alert("Cancle")
            }
        }
        employee();
    }



    // TIỀN LƯƠNG NHÂN VIÊN.
    function displaySalary() {
        let temp = "";
        for (let i = 0; i < listEmployee.length; i++) {
            temp += i + ". Name: " + listEmployee[i].getFullNameEmployee() + "\n";
        }
        let input = parseInt(prompt(temp));
        if (input >= 0 && input < listEmployee.length) {
            alert(listEmployee[input].showSalary())
        } else {
            alert("Failed!!!")
        }
        employee();
    }



    // MENU CHÍNH
    function displayMainMenu() {
        let input = parseInt(prompt("---Welcome---" + "\n1.Khách hàng." + "\n2.Nhân viên."));
        if (input === 1) {
            customer();
        } else if (input === 2) {
            employee();
        } else {
            alert("Failed!!!")
        }
    }



    // MENU KHÁCH HÀNG
    function customer() {
        let input1 = parseInt(prompt("1.Add New Customer." + "\n" +
            "2.Display Information Customer." + "\n" +
            "3.Edit Information Customer." + "\n" +
            "4.Delete Customer." + "\n" +
            "5.Display Total Pay Of Customer." + "\n" +
            "6.Quay lại."));
        switch (input1) {
            case 1:
                addNewCustomer();
                break;
            case 2:
                displayCustomer();
                break;
            case 3:
                editCustomer();
                break;
            case 4:
                deleteCustomer();
                break;
            case 5:
                displayTotalPayOfCustomer();
                break;
            case 6:
                displayMainMenu();
                break;
            default:
                alert("Failed")
        }
    }



    // MENU NHÂN VIÊN
    function employee() {
        let input2 = parseInt(prompt("1.Add New Employee." + "\n" +
            "2.Display Infomation Employ." + "\n" +
            "3.Display Salary." + "\n" +
            "4.Edit Information Employee." + "\n" +
            "5.Delete Employee." + "\n" +
            "6.Quay lại."));
        switch (input2) {
            case 1:
                addNewEmployee();
                break;
            case 2:
                displayEmployee();
                break;
            case 3:
                displaySalary();
                break;
            case 4:
                editInformationEmployee();
                break;
            case 5:
                deleteEmployee();
                break;
            case 6:
                displayMainMenu();
                break;
            default:
                alert("Failed")
        }
    }



    displayMainMenu();


</script>
</body>
</html>